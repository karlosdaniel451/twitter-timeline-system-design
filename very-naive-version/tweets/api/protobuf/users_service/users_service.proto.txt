syntax = "proto3";

option go_package = "users_service";

import "google/protobuf/timestamp.proto";

service TweetsService {
  rpc PostTweet (PostTweetRequest) returns (PostTweetResponse);
  rpc DeleteTweetById(DeleteTweetByIdRequest) returns (DeleteTweetByIdResponse);
  rpc GetTweetById (GetTweetByIdRequest) returns (GetTweetByIdResponse);
  rpc GetTweetsOfUser (GetTweetByIdRequest) returns (GetTweetByIdResponse);
}

message PostTweetRequest {
  required string text = 2;
  required string user_id = 3;
  string replies_to = 4;
  string quote_to = 5;
}

message PostTweetResponse {
  required string tweet_id = 1;
  required google.protobuf.Timestamp created_at = 2;
}

message DeleteTweetByIdRequest {
  required string tweet_id = 1;
}

message DeleteTweetByIdResponse {}

message GetTweetByIdRequest {
  required string tweet_id = 1;
}

message GetTweetByIdResponse {
  required string tweet_id = 1;
  required string text = 2;
  string replies_to = 3;
  string quote_to = 4;
  required google.protobuf.Timestamp created_at = 5;
}

message GetTweetsOfUserRequest {
  required string user_id = 1;
}

message GetTweetsOfUserResponse {
  repeated GetTweetByIdRequest tweets = 1;
}
